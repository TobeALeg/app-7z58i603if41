# ğŸŒ åŸŸåé…ç½®æŒ‡å— - aigctmp.wzbc.edu.cn

## ğŸ“‹ é—®é¢˜è¯´æ˜

**ç°è±¡**: æœåŠ¡å™¨å¯åŠ¨åæ˜¾ç¤º `127.0.0.1`ï¼Œæ— æ³•é€šè¿‡åŸŸå `aigctmp.wzbc.edu.cn` è®¿é—®

**ç›®æ ‡**: é€šè¿‡åŸŸå `https://aigctmp.wzbc.edu.cn` è®¿é—®ç½‘ç«™

**æœåŠ¡å™¨IP**: `10.145.251.29`

---

## ğŸ¯ è§£å†³æ–¹æ¡ˆï¼ˆåˆ†ä¸¤ç§æƒ…å†µï¼‰

### æƒ…å†µä¸€ï¼šå¼€å‘ç¯å¢ƒï¼ˆnpm run devï¼‰

å¦‚æœæ‚¨æ­£åœ¨ä½¿ç”¨ `npm run dev` å¯åŠ¨å¼€å‘æœåŠ¡å™¨ï¼š

#### âš ï¸ é‡è¦æç¤º

**å¼€å‘æœåŠ¡å™¨ä¸é€‚åˆç”Ÿäº§ç¯å¢ƒï¼**

- `npm run dev` æ˜¯ç”¨äºæœ¬åœ°å¼€å‘å’Œè°ƒè¯•
- ç”Ÿäº§ç¯å¢ƒåº”è¯¥ä½¿ç”¨ `npm run build` æ„å»ºåéƒ¨ç½²åˆ°Apache

#### å¦‚æœç¡®å®éœ€è¦åœ¨å¼€å‘ç¯å¢ƒæµ‹è¯•åŸŸåè®¿é—®

**æ­¥éª¤1: é…ç½®Viteå…è®¸å¤–éƒ¨è®¿é—®**

ç¼–è¾‘ `vite.config.ts` æ–‡ä»¶ï¼š

```typescript
import { defineConfig } from 'vite'
import react from '@vitejs/plugin-react'
import path from 'path'

export default defineConfig({
  plugins: [react()],
  resolve: {
    alias: {
      '@': path.resolve(__dirname, './src'),
    },
  },
  server: {
    host: '0.0.0.0',  // å…è®¸å¤–éƒ¨è®¿é—®
    port: 5173,
    strictPort: true,
  },
})
```

**æ­¥éª¤2: é‡å¯å¼€å‘æœåŠ¡å™¨**

```bash
npm run dev
```

ç°åœ¨å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼è®¿é—®ï¼š
- `http://localhost:5173` ï¼ˆæœ¬æœºï¼‰
- `http://10.145.251.29:5173` ï¼ˆå±€åŸŸç½‘ï¼‰

**æ­¥éª¤3: é…ç½®åŸŸåè§£æï¼ˆä¸´æ—¶æµ‹è¯•ï¼‰**

åœ¨**è®¿é—®è€…çš„ç”µè„‘**ä¸Šä¿®æ”¹hostsæ–‡ä»¶ï¼š

**Windowsç³»ç»Ÿ**:
```bash
# ç”¨ç®¡ç†å‘˜æƒé™æ‰“å¼€è®°äº‹æœ¬
# æ‰“å¼€æ–‡ä»¶: C:\Windows\System32\drivers\etc\hosts

# æ·»åŠ ä»¥ä¸‹è¡Œ
10.145.251.29  aigctmp.wzbc.edu.cn
```

**Linux/Macç³»ç»Ÿ**:
```bash
# ç¼–è¾‘hostsæ–‡ä»¶
sudo nano /etc/hosts

# æ·»åŠ ä»¥ä¸‹è¡Œ
10.145.251.29  aigctmp.wzbc.edu.cn
```

ä¿å­˜åï¼Œè®¿é—® `http://aigctmp.wzbc.edu.cn:5173`

---

### æƒ…å†µäºŒï¼šç”Ÿäº§ç¯å¢ƒï¼ˆæ¨èï¼‰âœ…

**è¿™æ˜¯æ­£ç¡®çš„éƒ¨ç½²æ–¹å¼ï¼**

#### å®Œæ•´éƒ¨ç½²æµç¨‹

**æ­¥éª¤1: æ„å»ºé¡¹ç›®**

```bash
# åœ¨é¡¹ç›®ç›®å½•æ‰§è¡Œ
npm run build
```

æ„å»ºå®Œæˆåï¼Œä¼šç”Ÿæˆ `dist/` ç›®å½•ã€‚

**æ­¥éª¤2: éƒ¨ç½²åˆ°Apache**

```bash
# ä¸Šä¼ æ–‡ä»¶åˆ°æœåŠ¡å™¨
scp -r dist/* user@10.145.251.29:/var/www/aigctmp/

# æˆ–è€…å¦‚æœåœ¨æœåŠ¡å™¨ä¸Šç›´æ¥æ„å»º
sudo cp -r dist/* /var/www/aigctmp/

# è®¾ç½®æƒé™
sudo chown -R www-data:www-data /var/www/aigctmp
sudo chmod -R 755 /var/www/aigctmp
```

**æ­¥éª¤3: é…ç½®Apacheè™šæ‹Ÿä¸»æœº**

åˆ›å»ºé…ç½®æ–‡ä»¶ï¼š

```bash
sudo nano /etc/apache2/sites-available/aigctmp.conf
```

ç²˜è´´ä»¥ä¸‹é…ç½®ï¼š

```apache
<VirtualHost *:80>
    ServerName aigctmp.wzbc.edu.cn
    DocumentRoot /var/www/aigctmp

    <Directory /var/www/aigctmp>
        Options -Indexes +FollowSymLinks
        AllowOverride All
        Require all granted

        # SPAè·¯ç”±æ”¯æŒ
        RewriteEngine On
        RewriteBase /
        RewriteRule ^index\.html$ - [L]
        RewriteCond %{REQUEST_FILENAME} !-f
        RewriteCond %{REQUEST_FILENAME} !-d
        RewriteRule . /index.html [L]
    </Directory>

    ErrorLog ${APACHE_LOG_DIR}/aigctmp_error.log
    CustomLog ${APACHE_LOG_DIR}/aigctmp_access.log combined
</VirtualHost>
```

**æ­¥éª¤4: å¯ç”¨é…ç½®**

```bash
# å¯ç”¨ç«™ç‚¹
sudo a2ensite aigctmp.conf

# å¯ç”¨å¿…è¦æ¨¡å—
sudo a2enmod rewrite

# æµ‹è¯•é…ç½®
sudo apache2ctl configtest

# é‡å¯Apache
sudo systemctl restart apache2
```

**æ­¥éª¤5: é…ç½®DNSè§£æ**

è”ç³»ç½‘ç»œç®¡ç†å‘˜ï¼Œåœ¨DNSæœåŠ¡å™¨ä¸­æ·»åŠ Aè®°å½•ï¼š

```
ç±»å‹: A
ä¸»æœº: aigctmp
åŸŸå: wzbc.edu.cn
IPåœ°å€: 10.145.251.29
TTL: 3600
```

å®Œæ•´è®°å½•ï¼š`aigctmp.wzbc.edu.cn` â†’ `10.145.251.29`

**æ­¥éª¤6: æµ‹è¯•è®¿é—®**

```bash
# æµ‹è¯•DNSè§£æ
ping aigctmp.wzbc.edu.cn
# åº”è¯¥æ˜¾ç¤º: 10.145.251.29

# æµ‹è¯•HTTPè®¿é—®
curl -I http://aigctmp.wzbc.edu.cn
# åº”è¯¥è¿”å›: HTTP/1.1 200 OK
```

åœ¨æµè§ˆå™¨è®¿é—®ï¼š`http://aigctmp.wzbc.edu.cn`

---

## ğŸ” é…ç½®HTTPSï¼ˆæ¨èï¼‰

### æ­¥éª¤1: å‡†å¤‡SSLè¯ä¹¦

æ‚¨éœ€è¦ä»¥ä¸‹æ–‡ä»¶ï¼š
- `cert.crt` - è¯ä¹¦æ–‡ä»¶
- `cert.key` - ç§é’¥æ–‡ä»¶
- `chain.crt` - è¯ä¹¦é“¾æ–‡ä»¶ï¼ˆå¯é€‰ï¼‰

### æ­¥éª¤2: ä¸Šä¼ è¯ä¹¦åˆ°æœåŠ¡å™¨

```bash
# åˆ›å»ºè¯ä¹¦ç›®å½•
sudo mkdir -p /etc/ssl/aigctmp

# ä¸Šä¼ è¯ä¹¦æ–‡ä»¶
sudo cp cert.crt /etc/ssl/aigctmp/
sudo cp cert.key /etc/ssl/aigctmp/
sudo cp chain.crt /etc/ssl/aigctmp/

# è®¾ç½®æƒé™
sudo chmod 600 /etc/ssl/aigctmp/cert.key
sudo chmod 644 /etc/ssl/aigctmp/cert.crt
```

### æ­¥éª¤3: æ›´æ–°Apacheé…ç½®

ç¼–è¾‘é…ç½®æ–‡ä»¶ï¼š

```bash
sudo nano /etc/apache2/sites-available/aigctmp.conf
```

æ›´æ–°ä¸ºä»¥ä¸‹å†…å®¹ï¼š

```apache
# HTTPSé…ç½®
<VirtualHost *:443>
    ServerName aigctmp.wzbc.edu.cn
    DocumentRoot /var/www/aigctmp

    # SSLé…ç½®
    SSLEngine on
    SSLCertificateFile /etc/ssl/aigctmp/cert.crt
    SSLCertificateKeyFile /etc/ssl/aigctmp/cert.key
    SSLCertificateChainFile /etc/ssl/aigctmp/chain.crt

    # å®‰å…¨å¤´
    Header always set Strict-Transport-Security "max-age=31536000"
    Header always set X-Frame-Options "SAMEORIGIN"
    Header always set X-Content-Type-Options "nosniff"

    <Directory /var/www/aigctmp>
        Options -Indexes +FollowSymLinks
        AllowOverride All
        Require all granted

        # SPAè·¯ç”±æ”¯æŒ
        RewriteEngine On
        RewriteBase /
        RewriteRule ^index\.html$ - [L]
        RewriteCond %{REQUEST_FILENAME} !-f
        RewriteCond %{REQUEST_FILENAME} !-d
        RewriteRule . /index.html [L]
    </Directory>

    ErrorLog ${APACHE_LOG_DIR}/aigctmp_error.log
    CustomLog ${APACHE_LOG_DIR}/aigctmp_access.log combined
</VirtualHost>

# HTTPè‡ªåŠ¨è·³è½¬åˆ°HTTPS
<VirtualHost *:80>
    ServerName aigctmp.wzbc.edu.cn
    Redirect permanent / https://aigctmp.wzbc.edu.cn/
</VirtualHost>
```

### æ­¥éª¤4: å¯ç”¨SSLæ¨¡å—å¹¶é‡å¯

```bash
# å¯ç”¨SSLæ¨¡å—
sudo a2enmod ssl
sudo a2enmod headers

# æµ‹è¯•é…ç½®
sudo apache2ctl configtest

# é‡å¯Apache
sudo systemctl restart apache2
```

### æ­¥éª¤5: æµ‹è¯•HTTPSè®¿é—®

```bash
# æµ‹è¯•HTTPS
curl -I https://aigctmp.wzbc.edu.cn
# åº”è¯¥è¿”å›: HTTP/1.1 200 OK
```

åœ¨æµè§ˆå™¨è®¿é—®ï¼š`https://aigctmp.wzbc.edu.cn`

---

## ğŸ” å¸¸è§é—®é¢˜æ’æŸ¥

### é—®é¢˜1: åŸŸåæ— æ³•è§£æ

**ç—‡çŠ¶**: `ping aigctmp.wzbc.edu.cn` å¤±è´¥

**åŸå› **: DNSæœªé…ç½®æˆ–æœªç”Ÿæ•ˆ

**è§£å†³**:

```bash
# æ£€æŸ¥DNS
nslookup aigctmp.wzbc.edu.cn

# å¦‚æœDNSæœªé…ç½®ï¼Œä¸´æ—¶ä½¿ç”¨hostsæ–‡ä»¶
# Windows: C:\Windows\System32\drivers\etc\hosts
# Linux: /etc/hosts
# æ·»åŠ : 10.145.251.29  aigctmp.wzbc.edu.cn
```

### é—®é¢˜2: è®¿é—®æ˜¾ç¤ºApacheé»˜è®¤é¡µé¢

**åŸå› **: è™šæ‹Ÿä¸»æœºé…ç½®æœªç”Ÿæ•ˆ

**è§£å†³**:

```bash
# æ£€æŸ¥é…ç½®æ˜¯å¦å¯ç”¨
ls -l /etc/apache2/sites-enabled/ | grep aigctmp

# å¦‚æœæ²¡æœ‰ï¼Œå¯ç”¨é…ç½®
sudo a2ensite aigctmp.conf
sudo systemctl restart apache2
```

### é—®é¢˜3: é¡µé¢åˆ·æ–°å404é”™è¯¯

**åŸå› **: SPAè·¯ç”±é…ç½®æœªç”Ÿæ•ˆ

**è§£å†³**:

```bash
# ç¡®ä¿rewriteæ¨¡å—å·²å¯ç”¨
sudo a2enmod rewrite

# æ£€æŸ¥.htaccessæ–‡ä»¶
ls -la /var/www/aigctmp/.htaccess

# å¦‚æœä¸å­˜åœ¨ï¼Œåˆ›å»ºå®ƒ
sudo nano /var/www/aigctmp/.htaccess
```

`.htaccess` å†…å®¹ï¼š

```apache
<IfModule mod_rewrite.c>
  RewriteEngine On
  RewriteBase /
  RewriteRule ^index\.html$ - [L]
  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteCond %{REQUEST_FILENAME} !-d
  RewriteRule . /index.html [L]
</IfModule>
```

### é—®é¢˜4: SSLè¯ä¹¦é”™è¯¯

**ç—‡çŠ¶**: æµè§ˆå™¨æ˜¾ç¤º"ä¸å®‰å…¨"æˆ–è¯ä¹¦é”™è¯¯

**åŸå› **: è¯ä¹¦é…ç½®é”™è¯¯æˆ–è¯ä¹¦ä¸åŒ¹é…

**è§£å†³**:

```bash
# æ£€æŸ¥è¯ä¹¦
openssl x509 -in /etc/ssl/aigctmp/cert.crt -text -noout

# æ£€æŸ¥è¯ä¹¦åŸŸå
openssl x509 -in /etc/ssl/aigctmp/cert.crt -noout -subject

# æ£€æŸ¥è¯ä¹¦æœ‰æ•ˆæœŸ
openssl x509 -in /etc/ssl/aigctmp/cert.crt -noout -dates
```

### é—®é¢˜5: ç«¯å£è¢«å ç”¨

**ç—‡çŠ¶**: Apacheå¯åŠ¨å¤±è´¥ï¼Œæç¤ºç«¯å£è¢«å ç”¨

**è§£å†³**:

```bash
# æ£€æŸ¥80ç«¯å£
sudo lsof -i :80

# æ£€æŸ¥443ç«¯å£
sudo lsof -i :443

# å¦‚æœæœ‰å…¶ä»–ç¨‹åºå ç”¨ï¼Œåœæ­¢å®ƒ
sudo systemctl stop <service-name>

# æˆ–è€…ä¿®æ”¹Apacheç›‘å¬ç«¯å£
sudo nano /etc/apache2/ports.conf
```

---

## ğŸ“ å®Œæ•´éƒ¨ç½²æ£€æŸ¥æ¸…å•

### æœåŠ¡å™¨ç«¯é…ç½®

- [ ] é¡¹ç›®å·²æ„å»ºï¼ˆ`npm run build`ï¼‰
- [ ] æ–‡ä»¶å·²ä¸Šä¼ åˆ° `/var/www/aigctmp/`
- [ ] æ–‡ä»¶æƒé™å·²è®¾ç½®ï¼ˆ755/644ï¼‰
- [ ] Apacheé…ç½®æ–‡ä»¶å·²åˆ›å»º
- [ ] è™šæ‹Ÿä¸»æœºå·²å¯ç”¨
- [ ] å¿…è¦æ¨¡å—å·²å¯ç”¨ï¼ˆrewrite, ssl, headersï¼‰
- [ ] Apacheé…ç½®æµ‹è¯•é€šè¿‡
- [ ] Apacheå·²é‡å¯

### DNSé…ç½®

- [ ] DNS Aè®°å½•å·²æ·»åŠ 
- [ ] DNSè§£æå·²ç”Ÿæ•ˆï¼ˆ`ping aigctmp.wzbc.edu.cn`ï¼‰
- [ ] è§£æåˆ°æ­£ç¡®çš„IPï¼ˆ10.145.251.29ï¼‰

### SSLé…ç½®ï¼ˆå¦‚æœä½¿ç”¨HTTPSï¼‰

- [ ] SSLè¯ä¹¦å·²å‡†å¤‡
- [ ] è¯ä¹¦å·²ä¸Šä¼ åˆ°æœåŠ¡å™¨
- [ ] è¯ä¹¦æƒé™å·²è®¾ç½®
- [ ] Apache SSLé…ç½®å·²æ›´æ–°
- [ ] SSLæ¨¡å—å·²å¯ç”¨
- [ ] HTTPSè®¿é—®æ­£å¸¸

### åŠŸèƒ½æµ‹è¯•

- [ ] HTTPè®¿é—®æ­£å¸¸
- [ ] HTTPSè®¿é—®æ­£å¸¸ï¼ˆå¦‚æœé…ç½®ï¼‰
- [ ] é¦–é¡µæ­£å¸¸æ˜¾ç¤º
- [ ] æ‰€æœ‰é¡µé¢è·¯ç”±æ­£å¸¸
- [ ] é¡µé¢åˆ·æ–°ä¸å‡ºç°404
- [ ] CASç™»å½•æ­£å¸¸
- [ ] é™æ€èµ„æºåŠ è½½æ­£å¸¸

---

## ğŸ¯ æ¨èçš„éƒ¨ç½²æµç¨‹

### å¯¹äºç”Ÿäº§ç¯å¢ƒï¼ˆæ¨èï¼‰

```bash
# 1. æ„å»ºé¡¹ç›®
npm run build

# 2. ä¸Šä¼ åˆ°æœåŠ¡å™¨
scp -r dist/* user@10.145.251.29:/var/www/aigctmp/

# 3. é…ç½®Apache
sudo nano /etc/apache2/sites-available/aigctmp.conf
sudo a2ensite aigctmp.conf
sudo a2enmod rewrite ssl headers

# 4. é‡å¯Apache
sudo systemctl restart apache2

# 5. é…ç½®DNSï¼ˆè”ç³»ç½‘ç»œç®¡ç†å‘˜ï¼‰
# æ·»åŠ Aè®°å½•: aigctmp.wzbc.edu.cn -> 10.145.251.29

# 6. æµ‹è¯•è®¿é—®
curl -I http://aigctmp.wzbc.edu.cn
```

### å¯¹äºå¼€å‘æµ‹è¯•ï¼ˆä¸æ¨èç”¨äºç”Ÿäº§ï¼‰

```bash
# 1. ä¿®æ”¹vite.config.tsï¼Œæ·»åŠ  host: '0.0.0.0'

# 2. å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run dev

# 3. ä¿®æ”¹æœ¬åœ°hostsæ–‡ä»¶
# æ·»åŠ : 10.145.251.29  aigctmp.wzbc.edu.cn

# 4. è®¿é—®
http://aigctmp.wzbc.edu.cn:5173
```

---

## ğŸ“ éœ€è¦å¸®åŠ©ï¼Ÿ

### é—®é¢˜åˆ†ç±»

| é—®é¢˜ç±»å‹ | è§£å†³æ–¹æ³• |
|---------|---------|
| **DNSè§£æé—®é¢˜** | è”ç³»ç½‘ç»œç®¡ç†å‘˜é…ç½®DNS |
| **Apacheé…ç½®** | å‚è€ƒæœ¬æ–‡æ¡£"é…ç½®Apacheè™šæ‹Ÿä¸»æœº" |
| **SSLè¯ä¹¦** | å‚è€ƒæœ¬æ–‡æ¡£"é…ç½®HTTPS" |
| **404é”™è¯¯** | å‚è€ƒ"é—®é¢˜3: é¡µé¢åˆ·æ–°å404é”™è¯¯" |
| **ç«¯å£å ç”¨** | å‚è€ƒ"é—®é¢˜5: ç«¯å£è¢«å ç”¨" |

### å¿«é€Ÿå‘½ä»¤å‚è€ƒ

```bash
# æ„å»ºé¡¹ç›®
npm run build

# é‡å¯Apache
sudo systemctl restart apache2

# æŸ¥çœ‹Apacheæ—¥å¿—
sudo tail -f /var/log/apache2/aigctmp_error.log

# æµ‹è¯•DNS
ping aigctmp.wzbc.edu.cn

# æµ‹è¯•HTTP
curl -I http://aigctmp.wzbc.edu.cn

# æµ‹è¯•HTTPS
curl -I https://aigctmp.wzbc.edu.cn
```

---

## âœ… æ€»ç»“

### å…³é”®ç‚¹

1. **å¼€å‘ç¯å¢ƒ** (`npm run dev`)
   - ä»…ç”¨äºæœ¬åœ°å¼€å‘
   - æ˜¾ç¤º127.0.0.1æˆ–localhost
   - ä¸é€‚åˆç”Ÿäº§ç¯å¢ƒ

2. **ç”Ÿäº§ç¯å¢ƒ** (`npm run build` + Apache)
   - æ„å»ºé™æ€æ–‡ä»¶
   - éƒ¨ç½²åˆ°Apache
   - é€šè¿‡åŸŸåè®¿é—®
   - æ”¯æŒHTTPS

3. **åŸŸåè®¿é—®éœ€è¦**
   - DNSé…ç½®ï¼ˆAè®°å½•ï¼‰
   - Apacheè™šæ‹Ÿä¸»æœºé…ç½®
   - é˜²ç«å¢™å¼€æ”¾80/443ç«¯å£

### ä¸‹ä¸€æ­¥

1. é€‰æ‹©éƒ¨ç½²æ–¹å¼ï¼ˆæ¨èç”Ÿäº§ç¯å¢ƒï¼‰
2. æŒ‰ç…§æœ¬æ–‡æ¡£æ­¥éª¤é…ç½®
3. æµ‹è¯•è®¿é—®
4. å¦‚æœ‰é—®é¢˜ï¼Œå‚è€ƒ"å¸¸è§é—®é¢˜æ’æŸ¥"

---

**æ–‡æ¡£ç‰ˆæœ¬**: 1.0  
**æ›´æ–°æ—¥æœŸ**: 2025-12-03  
**é€‚ç”¨åœºæ™¯**: åŸŸåé…ç½®å’Œç”Ÿäº§éƒ¨ç½²
